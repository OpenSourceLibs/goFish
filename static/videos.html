<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"> 
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <script src="/static/scripts/ProcessVideo.js" type="text/javascript"></script>
        
        <link rel="stylesheet" type="text/css" href="/static/style/ui.css">

        <title>Cisco: Fish Finder</title>
    </head>
    <body>
        <div class="container">
{{if .VideosLoaded}}
    <div id="videos" class=panel>
        <div class="panel-header">Videos</div>
        <div class="panel-body" style="display: flex;">
            <div id="left-video">
                <video width="320" height="240" controls class="video" id="left">
                    <source src="/static/videos/{{.LeftVideoInfo.Name}}" type="video/mp4">
                        Video tag is not supported by your current browser.
                </video>
                <br>
                <button onclick="video_handler.seekFrame(processor.leftVideo, -1)"><</button>
                <button onclick="video_handler.seekFrame(processor.leftVideo, 1)">></button>
                <br>
                <input type="range" value="0" min="0" max="0" id="left-slider" style="width:320px;">
                <div class="panel-body" id="left-info">
                    <strong>Frame: </strong><span class="time"></span><br>
                    <strong>Frame Offset: </strong><span class="offset"></span><br>
                    <strong>Frames: </strong><span class="frames"></span><br>
                    <strong>Duration: </strong><span class="duration"></span><br>
                </div>

            </div>
            <div id="left-json" hidden>{{.LeftVideoInfo.JSON}}</div>
            <div id="right-video">
                <video width="320" height="240" controls class="video" id="right">
                    <source src="/static/videos/{{.RightVideoInfo.Name}}" type="video/mp4">
                        Video tag is not supported by your current browser.
                </video>
                <br>
                <button onclick="video_handler.seekFrame(processor.rightVideo, -1)"><</button>
                <button onclick="video_handler.seekFrame(processor.rightVideo, 1)">></button>
                <br>
                <input type="range" value="0" min="0" max="0" id="right-slider" style="width:320px;">
                <div class="panel-body" id="right-info">
                    <strong>Frame: </strong><span class="time"></span><br>
                    <strong>Frame Offset: </strong><span class="offset"></span><br>
                    <strong>Frames: </strong><span class="frames"></span><br>
                    <strong>Duration: </strong><span class="duration"></span><br>
                </div>
            </div>
            <div id="right-json" hidden>{{.RightVideoInfo.JSON}}</div>
        </div>
    </div>
    <div id="main-video" class="panel">
        <div class="panel-header">Adjusted Video</div>
        <div class="panel-body">
            <canvas id="adjusted-video" width="640" height="240"></canvas>
            <div>Activity: </div><div id="activity">None</div>
            <br>
            <input type="range" value="0" min="0" max="0" id="scrubber" style="width:640px;"><br>
            <div id="adjusted-time"></div>
            <div id="controls">
                <div style="display: flex;">
                    <button onclick="processor.play()">Play</button>
                    <button onclick="processor.pause()">Pause</button>
                </div>
                <div style="display: flex;">
                    <button onclick="processor.sync()">Play From Offsets</button>
                </div>
            </div>
        </div>
    </div>
{{end}}

<div class="panel">
    <div class="panel-header">Select Videos</div>
    <div class="panel-body">
        <form method="post" enctype="multipart/form-data" id="select-video">
            <label for="select-video-1">Left Video:</label><input type="file" name="select-video-1" /><br>
            <label for="select-video-2">Right Video:</label><input type="file" name="select-video-2" /><br>
            <input type="submit" value="Select Videos" />
        </form>
    </div>
</div>

<div class="panel">
    <div class="panel-header">Upload Videos</div>
    <div class="panel-body">
        <form method="post" enctype="multipart/form-data" id="upload-video">
            <input type="file" name="upload-files" multiple><br>
            <input type="submit" value="Upload Videos" />
        </form>
    </div>
</div>
</div>
<script src="/static/scripts/Loader.js"></script>
</body>
</html>