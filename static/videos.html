<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
    <meta charset="UTF-8">
    <meta name="author" content="Tomas Rigaux">

    <!-- External Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- External Links-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">

    <!-- Internal Scripts -->
    <script src="/static/scripts/ProcessVideo.js" type="text/javascript"></script>

    <!-- Internal Links -->
    <link rel="stylesheet" type="text/css" href="/static/style/ui.css">
    <link rel="stylesheet" type="text/css" href="/static/style/video.css">

    <title>Cisco: Fish Finder</title>
</head>

<body>
    <div class="navbar">
        <div class="nav-header">Fish Finder</div>
        <div class="dropdown">
            <div class="nav-item"><i class="material-icons">&#xe63a;</i>&emsp;Select Video</div>
            <div class="dropdown-content">
                <form method="post" enctype="multipart/form-data" id="select-video">
                    <!--input type="file" name="select-video-1"  /><br-->
                    <!--input type="file" name="select-video-2"  /><br-->
                    <input type="file" name="select-video"    /><br>
                    <input type="submit" value="Select Video" />
                </form>
            </div>
        </div>
        <div class="dropdown">
            <div class="nav-item"><i class="material-icons">&#xe2c6;</i>&emsp;Upload Videos</div>
            <div class="dropdown-content">
                <form method="post" enctype="multipart/form-data" id="upload-video">
                    <input type="file" name="upload-files" multiple><br>
                    <input type="submit" value="Upload Videos" />
                </form>
            </div>
        </div>
    </div>
    <div class="container">
        <div id="main-video" class="panel">
            <div class="panel-body">
                <canvas id="adjusted-video" width="1066" height="400"></canvas>
                <br>
                <canvas id="event-time-bar" width="4000" height="40"></canvas>
                <br>
                <div id="adjusted-time"></div>
                <div id="controls">
                    <button onclick="SeekBack()"><i class="material-icons">&#xe045;</i></button>
                    <button id="play-pause"><i class="material-icons">&#xe037;</i></button>
                    <button onclick="SeekForward()"><i class="material-icons">&#xe044;</i></button>
                </div>
            </div>
        </div>
        {{if .VideosLoaded}}
        <div id="info-panel" class="panel">
            <div class="panel-header">Info</div>
            <div class="panel-body">
                <div>Total Events: <span id="total-events"></span></div>
                <dl>
                    <dt>Rulers:</dt>
                    <dd id="ruler-info"></dd>
                </dl>
            </div>
        </div>
        <div id="tools" class="panel">
            <div class="panel-header"><button class="window-btn" id="toolbar-shape"><i
                        class="material-icons">&#xe5cf;</i></button></div>
            <div class="panel-body">
                <div class="toolbar">
                    <button id="ruler" onclick="toolkit.SetMode(0, this)"><i
                            class="material-icons">&#xe150;</i></button>
                    <button id="clear-ruler" onclick="toolkit.SetMode(1, this)" hidden><i
                            class="material-icons">&#xe888;</i></button>
                </div>
            </div>
        </div>
        <div id="videos" class=panel hidden>
            <div class="panel-header">Videos</div>
            <div class="panel-body" style="display: flex;">
                <div id="selected-video">
                    <video width="320" height="240" controls class="video" id="selected">
                        <source src="/static/proc_videos/{{.VideoInfo.Name}}" type="video/mp4">
                        Video tag is not supported by your current browser.
                    </video>
                </div>
                <div id="json-config" hidden>{{.VideoInfo.JSON}}</div>
            </div>
        </div>
        {{end}}
    </div>
    <script src="/static/scripts/Canvas.js" type="text/javascript"></script>
    <script src="/static/scripts/Loader.js" type="text/javascript"></script>
    <noscript>Whoops! It looks like your browser doesn't support JavaScript!</noscript>
</body>
</html>