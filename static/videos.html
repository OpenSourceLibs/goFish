<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"> 
        <script src="scripts/ProcessVideo.js" type="text/javascript"></script>
    </head>
{{if .VideosLoaded}}
    <div style="display: flex;">
        <div>
            <video width="320" height="240" controls class="video" id="left">
                <source src="static/videos/{{.LeftVideoSrc}}" type="video/mp4">
                    Video tag is not supported by your current browser.
            </video>
            <br>
            <button onclick="video_handler.seekFrame(processor.leftVideo, -1)"><</button>
            <button onclick="video_handler.seekFrame(processor.leftVideo, 1)">></button>
            <br>
            <input type="range" min="0" max="100" id="left-slider" style="width:320px;">
            <div id="left-offset"></div>
        </div>
        <div>
            <video width="320" height="240" controls class="video" id="right">
                <source src="static/videos/{{.RightVideoSrc}}" type="video/mp4">
                    Video tag is not supported by your current browser.
            </video>
            <br>
            <button onclick="video_handler.seekFrame(processor.rightVideo, -1)"><</button>
            <button onclick="video_handler.seekFrame(processor.rightVideo, 1)">></button>
            <br>
            <input type="range" min="0" max="100" id="right-slider" style="width:320px;">
            <div id="right-offset"></div>
        </div>
        <div>
            <h3>Video Info</h3><hr>
            <div style="display: flex;">
                <div id="left-video">
                    <h4>Left Video</h4>
                    <strong>Time: </strong><span class="time"></span><br>
                    <strong>Frame Offset: </strong><span class="offset"></span><br>
                    <strong>Frames: </strong><span class="frames"></span><br>
                    <strong>Duration: </strong><span class="duration"></span><br>
                </div>
                <div id="right-video">
                    <h4>Right Video</h4>
                    <strong>Time: </strong><span class="time"></span><br>
                    <strong>Frame Offset: </strong><span class="offset"></span><br>
                    <strong>Frames: </strong><span class="frames"></span><br>
                    <strong>Duration: </strong><span class="duration"></span><br>
                </div>
            </div>
            <hr>
        </div>
    </div>
    <br>
    <button onclick="processor.play()">Play</button>
    <button onclick="processor.sync()">Play In-Sync</button>
    <button onclick="processor.pause()">Pause</button>
    <br>
    <canvas id="adjusted-video" width="640" height="240"></canvas>
    <br>
    <input type="range" value="0" min="0" max="0" id="scrubber" style="width:640px;"><br>
    <div id="adjusted-time"></div>
{{end}}
<h3>Select the videos you wish to display</h3>
<h3>Select Videos</h3>
<form method="post" enctype="multipart/form-data">
    <input type="file" name="select-video-1" /><br>
    <input type="file" name="select-video-2" /><br>
    <input type="submit" value="Select Videos" />
</form>

<h3>Upload Videos</h3>
<form method="post" enctype="multipart/form-data">
    <input type="file" name="upload-files" multiple><br>
    <input type="submit" value="Upload Videos" />
</form>

<script> 
    document.addEventListener("DOMContentLoaded", () => {
        processor.load();
    });

    window.onload = function()
    {   
        video_handler.handleSlider(processor.leftVideo);
        video_handler.handleSlider(processor.rightVideo);
        video_handler.adjustMainVideo();
        video_handler.timerCallback();
    }
</script>
</html>