<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"> 
    <meta charset="UTF-8">
    <meta name="author" content="Tomas Rigaux">
    
    <!-- External Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!-- External Links-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Internal Scripts -->
    <script src="/static/scripts/ProcessVideo.js" type="text/javascript"></script>
    <script src="/static/scripts/Canvas.js" type="text/javascript"></script>
    
    <!-- Internal Links -->
    <link rel="stylesheet" type="text/css" href="/static/style/ui.css">
    <link rel="stylesheet" type="text/css" href="/static/style/video.css">

    <title>Cisco: Fish Finder</title>
</head>
<body>
    <div class="navbar">
        <div>Fish Finder</div>
        <ul></ul>
    </div>
    <div class="container">
           
        <div id="main-video" class="panel">
            <div class="panel-header">
                <span>Adjusted Video</span>
                <div class="dropdown panel-header">
                    <i class="material-icons">&#xe04a;</i>
                    <div class="dropdown-content">
                        <div class="panel">
                            <div class="panel-header">Select Videos</div>
                            <div class="panel-body">
                                <form method="post" enctype="multipart/form-data" id="select-video">
                                    <input type="file" name="select-video-1" /><br>
                                    <input type="file" name="select-video-2" /><br>
                                    <input type="submit" value="Select Videos" />
                                </form>
                            </div>
                        </div>
        
                        <div class="panel">
                            <div class="panel-header">Upload Videos</div>
                            <div class="panel-body">
                                <form method="post" enctype="multipart/form-data" id="upload-video">
                                    <input type="file" name="upload-files" multiple><br>
                                    <input type="submit" value="Upload Videos" />
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <canvas id="adjusted-video" width="1280" height="480"></canvas>
                <br>
                <canvas id="event-time-bar" width="4000" height="40"></canvas>
                <br>
                <div id="adjusted-time"></div>
                <div id="controls">
                    <button onclick="seekBack()"><i class="material-icons">&#xe045;</i></button>
                    <button onclick="play()" alt="Play"><i class="material-icons">&#xe037;</i></button>
                    <button onclick="pause()"><i class="material-icons">&#xe034;</i></button>
                    <button onclick="sync()"><i class="material-icons">&#xe042;</i></button>
                    <button onclick="seekForward()"><i class="material-icons">&#xe044;</i></button>
                </div>
            </div>
        </div>
{{if .VideosLoaded}}
        <div id="videos" class=panel>
            <div class="panel-header">Videos</div>
            <div class="panel-body" style="display: flex;">
                <div id="left-video">
                    <video width="320" height="240" controls class="video" id="left">
                        <source src="/static/videos/{{.LeftVideoInfo.Name}}" type="video/mp4">
                            Video tag is not supported by your current browser.
                    </video>
                    <br>
                    <button onclick="videoHandler.seekFrame(processor.leftVideo, -1)"><</button>
                    <button onclick="videoHandler.seekFrame(processor.leftVideo, 1)">></button>
                    <br>
                    <input type="range" value="0" min="0" max="0" id="left-slider" style="width:320px;">
                    <div class="panel-body" id="left-info">
                        <strong>Frame: </strong><span class="time"></span><br>
                        <strong>Frame Offset: </strong><span class="offset"></span><br>
                        <strong>Frames: </strong><span class="frames"></span><br>
                        <strong>Duration: </strong><span class="duration"></span><br>
                    </div>

                </div>
                <div id="left-json" hidden>{{.LeftVideoInfo.JSON}}</div>
                <div id="right-video">
                    <video width="320" height="240" controls class="video" id="right">
                        <source src="/static/videos/{{.RightVideoInfo.Name}}" type="video/mp4">
                            Video tag is not supported by your current browser.
                    </video>
                    <br>
                    <button onclick="videoHandler.seekFrame(processor.rightVideo, -1)"><</button>
                    <button onclick="videoHandler.seekFrame(processor.rightVideo, 1)">></button>
                    <br>
                    <input type="range" value="0" min="0" max="0" id="right-slider" style="width:320px;">
                    <div class="panel-body" id="right-info">
                        <strong>Frame: </strong><span class="time"></span><br>
                        <strong>Frame Offset: </strong><span class="offset"></span><br>
                        <strong>Frames: </strong><span class="frames"></span><br>
                        <strong>Duration: </strong><span class="duration"></span><br>
                    </div>
                </div>
                <div id="right-json" hidden>{{.RightVideoInfo.JSON}}</div>
            </div>
        </div>
{{end}}
    </div>
<script src="/static/scripts/Loader.js"></script>
<noscript>Whoops! It looks like your browser doesn't support JavaScript!</noscript>
</body>
</html>